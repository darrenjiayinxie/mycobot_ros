<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="mycobot_280" >

	<xacro:property name="width" value=".2" />
	<xacro:property name="M_PI" value="3.1415926536"/>
	
	<!-- defining the links -->
	
	<link name = "base_link" />

	<link name = "body_link">
		<visual>
			<geometry>
		  		<mesh filename="package://mycobot_gazebo/models/mycobot/meshes/body_link.dae"/>
		  	</geometry>
			<origin xyz = "0.0 0 0 " rpy = " 0 0 -1.5708"/>
		</visual>
		<collision>
			<geometry>
		  		<mesh filename="package://mycobot_gazebo/models/mycobot/meshes/body_link.dae"/>
		  	</geometry>
			<origin xyz = "0.0 0 0 " rpy = " 0 0 -1.5708"/>
		</collision>
		<inertial>
			<origin rpy="0 0 -1.5708" xyz="0 0 0" /> <!-- rpy="0 0 -1.5708" xyz="0 0 0.075" -->
			<mass value="5" />
			<inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0" />
		</inertial>
	</link>
  
  
	<link name="arm1_link">
		<visual>
			<geometry>
				<mesh filename="package://mycobot_gazebo/models/mycobot/meshes/arm1_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.06096 " rpy = " 0 0 -1.5708"/>
		</visual>
		<collision>
			<geometry>
				<mesh filename="package://mycobot_gazebo/models/mycobot/meshes/arm1_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.06096 " rpy = " 0 0 -1.5708"/>
		</collision>
		<inertial>
            <origin rpy="0 0 -1.5708" xyz="0 0 0.075" />
            	<mass value="0.1" />
            <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01" />
        </inertial>
        
	</link>

	<link name="arm2_link">
		<visual>
			<geometry>
				<mesh filename="package://mycobot_gazebo/models/mycobot/meshes/arm2_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 0.03256 " rpy = " 0 -1.5708 0"/>
		</visual>
		<collision>
			<geometry>
				<mesh filename="package://mycobot_gazebo/models/mycobot/meshes/arm2_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 0.03256 " rpy = " 0 -1.5708 0"/>
		</collision>
		<inertial>
            <origin rpy="0 -1.5708 0" xyz="0 0 0.06" />
            <mass value="0.1" />
            <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01" />
        </inertial>
	</link>

	<link name="arm3_link">
		<visual>
			<geometry>
				<mesh filename="package://mycobot_gazebo/models/mycobot/meshes/arm3_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 0.03056 " rpy = " 0 -1.5708 0"/>
		</visual>
		<collision>
			<geometry>
				<mesh filename="package://mycobot_gazebo/models/mycobot/meshes/arm3_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 0.03056 " rpy = " 0 -1.5708 0"/>
		</collision>
		<inertial>
            <origin rpy="0 -1.5708 0" xyz="0 0 0.06" />
            <mass value="0.1" />
            <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01" />
        </inertial>
	</link>

	<link name="arm4_link">
		<visual>
			<geometry>
				<mesh filename="package://mycobot_gazebo/models/mycobot/meshes/arm4_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.03356 " rpy = " -1.5708 0 0"/>
		</visual>
		<collision>
			<geometry>
				<mesh filename="package://mycobot_gazebo/models/mycobot/meshes/arm4_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.03356 " rpy = " -1.5708 0 0"/>
		</collision>
		<inertial>
            <origin rpy="-1.5708 0 0" xyz="0 0 0.06" />
            <mass value="0.1" />
            <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01" />
        </inertial>
	</link>

	<link name="arm5_link">
		<visual>
			<geometry>
				<mesh filename="package://mycobot_gazebo/models/mycobot/meshes/arm5_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.038 " rpy = " 0 0 0"/>
		</visual>
		<collision>
			<geometry>
				<mesh filename="package://mycobot_gazebo/models/mycobot/meshes/arm5_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.038 " rpy = " 0 0 0"/>
		</collision>
		<inertial>
            <origin rpy="0 0 0" xyz="0 0 0.06" />
            <mass value="0.1" />
            <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01" />
        </inertial>
	</link>

	<link name="arm5_flange">
		<visual>
			<geometry>
				<mesh filename="package://mycobot_gazebo/models/mycobot/meshes/arm5_flange.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.012 " rpy = " 0 0 0"/>
		</visual>
		<collision>
			<geometry>
				<mesh filename="package://mycobot_gazebo/models/mycobot/meshes/arm5_flange.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.012 " rpy = " 0 0 0"/>
		</collision>
		<inertial>
            <origin rpy="0 0 0" xyz="0 0 0.06" />
            <mass value="0.1" />
            <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01" />
        </inertial>
	</link>

	<!-- defining the joints -->
	
	<joint name="body_joint" type="fixed">
        <parent link="base_link" />
        <child link="body_link" />
    </joint>
    
	<joint name="arm1_joint" type="revolute">
		<axis xyz="0 0 1"/>
		<limit effort = "30.0" lower = "-2.88" upper = "2.88" velocity = "1.5"/>
		<parent link="body_link"/>
		<child link="arm1_link"/>
		<origin xyz= "0 0 0.13156" rpy = "0 0 0"/>
	</joint>


	<joint name="arm2_joint" type="revolute">
		<axis xyz="0 0 1"/>
		<limit effort = "30.0" lower = "-2.88" upper = "2.88" velocity = "1.5"/>
		<parent link="arm1_link"/>
		<child link="arm2_link"/>
		<origin xyz= "0 0 0" rpy = "0 1.5708 -1.5708"/>
	</joint>


	<joint name="arm3_joint" type="revolute">
		<axis xyz=" 0 0 1"/>
		<limit effort = "30.0" lower = "-2.88" upper = "2.88" velocity = "1.5"/>
		<parent link="arm2_link"/>
		<child link="arm3_link"/>
		<origin xyz= "  -0.1104 0 0   " rpy = "0 0 0"/>
	</joint>



	<joint name="arm4_joint" type="revolute">
		<axis xyz=" 0 0 1"/>
		<limit effort = "30.0" lower = "-2.88" upper = "2.88" velocity = "1.5"/>
		<parent link="arm3_link"/>
		<child link="arm4_link"/>
		<origin xyz= "-0.096 0 0.06462" rpy = "0 0 -1.5708"/>
	</joint>

	<joint name="arm5_joint" type="revolute">
		<axis xyz="0 0 1"/>
		<limit effort = "30.0" lower = "-2.88" upper = "2.88" velocity = "1.5"/>
		<parent link="arm4_link"/>
		<child link="arm5_link"/>
		<origin xyz= "0 -0.07318 0" rpy = "1.5708 -1.5708 0"/>
	</joint>

	<joint name="arm5_flange_joint" type="revolute">
		<axis xyz="0 0 1"/>
		<limit effort = "30.0" lower = "-3.05" upper = "3.05" velocity = "1.5"/>
		<parent link="arm5_link"/>
		<child link="arm5_flange"/>
		<origin xyz= "0 0.0456 0" rpy = "-1.5708 0 0"/>
	</joint>
	
	
	<!-- defining the transmission for ROS Control -->
  	
	<xacro:macro name="transmission_block" params="joint_name">
		<transmission name="tran_${joint_name}">
			<type>transmission_interface/SimpleTransmission</type>
			<joint name="${joint_name}">
				<hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
			</joint>
			<actuator name="motor_${joint_name}">
				<hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
				<mechanicalReduction>1</mechanicalReduction>
			</actuator>
		</transmission>
	</xacro:macro>
	
	<xacro:transmission_block joint_name="arm1_joint"/>
	<xacro:transmission_block joint_name="arm2_joint"/>
	<xacro:transmission_block joint_name="arm3_joint"/>
	<xacro:transmission_block joint_name="arm4_joint"/>
	<xacro:transmission_block joint_name="arm5_joint"/>
	<xacro:transmission_block joint_name="arm5_flange_joint"/>
  
  	<!-- ros_control plugin -->
  	
  	<gazebo>
        <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
            <robotNamespace>/mycobot_280</robotNamespace>
            <robotSimType>gazebo_ros_control/DefaultRobotHWSim</robotSimType>
      		<legacyModeNS>true</legacyModeNS>
        </plugin>
    </gazebo>
  
</robot>
