<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="mycobot" >

	<!--xacro:property name="width" value=".2" /-->
	<!--xacro:property name="M_PI" value="3.1415926536"/-->
	
	<!-- defining the links -->
	
	<link name = "ground_plane">
	</link>

	<link name = "body_link">
		<visual>
			<geometry>
		  		<mesh filename="package://mycobot_description/models/mycobot/meshes/body_link.dae"/>
		  	</geometry>
			<origin xyz = "0.0 0 0 " rpy = " 0 0 0"/>
		</visual>
		<collision>
			<geometry>
		  		<mesh filename="package://mycobot_description/models/mycobot/meshes/body_link.dae"/>
		  	</geometry>
			<origin xyz = "0.0 0 0 " rpy = " 0 0 0"/>
		</collision>
		<inertial>
			<origin xyz="0.0112 0 0.03742" rpy="0 0 0"/> 
			<mass value="0.35" />
			<inertia ixx="3.82e-4" ixy="-1.628e-9" ixz="3.25e-6" iyy="5.09e-4" iyz="-1.66e-9" izz="5.38e-4" />
		</inertial>
	</link>
  
  	<gazebo reference="body_link">
		<kp>100000.0</kp>
		<kd>100000.0</kd>
		<mu1>10.0</mu1>
		<mu2>10.0</mu2>
        </gazebo>
    	
    	<link name="arm1_link">
		<visual>
			<geometry>
				<mesh filename="package://mycobot_description/models/mycobot/meshes/arm1_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.06096 " rpy = " 0 0 -1.5708"/>
		</visual>
		<collision>
			<geometry>
				<mesh filename="package://mycobot_description/models/mycobot/meshes/arm1_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.06096 " rpy = " 0 0 -1.5708"/>
		</collision>
		<inertial>
            		<origin rpy="0 0 -1.5708" xyz="0 -0.006642 -0.02617" />
            		<mass value="0.075" />
            		<inertia ixx="5e-5" ixy="0" ixz="0" iyy="5e-5" iyz="0" izz="3e-5" />
        	</inertial>
        
	</link>
	
	<link name="arm2_link">
		<visual>
			<geometry>
				<mesh filename="package://mycobot_description/models/mycobot/meshes/arm2_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 0.03256 " rpy = " 0 -1.5708 0"/>
		</visual>
		<collision>
			<geometry>
				<mesh filename="package://mycobot_description/models/mycobot/meshes/arm2_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 0.03256 " rpy = " 0 -1.5708 0"/>
		</collision>
		<inertial>
            		<origin rpy="0 -1.5708 0" xyz="-0.0543 0 0.058" />
            		<mass value="0.15" />
            		<inertia ixx="2e-4" ixy="0.0" ixz="0.0" iyy="2e-4" iyz="0.0" izz="5e-5" />
        	</inertial>
	</link>
	
	<link name="arm3_link">
		<visual>
			<geometry>
				<mesh filename="package://mycobot_description/models/mycobot/meshes/arm3_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 0.03056 " rpy = " 0 -1.5708 0"/>
		</visual>
		<collision>
			<geometry>
				<mesh filename="package://mycobot_description/models/mycobot/meshes/arm3_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 0.03056 " rpy = " 0 -1.5708 0"/>
		</collision>
		<inertial>
		    <origin rpy="0 -1.5708 0" xyz="-0.05 0 0.003" />
		    <mass value="0.15" />
		    <inertia ixx="1.8e-4" ixy="0.0" ixz="0.0" iyy="1.8e-4" iyz="0.0" izz="4e-5" />
        	</inertial>
	</link>
	
	<link name="arm4_link">
		<visual>
			<geometry>
				<mesh filename="package://mycobot_description/models/mycobot/meshes/arm4_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.03356 " rpy = " -1.5708 0 0"/>
		</visual>
		<collision>
			<geometry>
				<mesh filename="package://mycobot_description/models/mycobot/meshes/arm4_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.03356 " rpy = " -1.5708 0 0"/>
		</collision>
		<inertial>
		    <origin rpy="-1.5708 0 0" xyz="0 -0.005 -0.005" />
		    <mass value="0.05" />
		    <inertia ixx="1.8e-5" ixy="0.0" ixz="0.0" iyy="1.8e-5" iyz="0.0" izz="1.8e-5" />
        	</inertial>
	</link>
	
	<link name="arm5_link">
		<visual>
			<geometry>
				<mesh filename="package://mycobot_description/models/mycobot/meshes/arm5_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.038 " rpy = " 0 0 0"/>
		</visual>
		<collision>
			<geometry>
				<mesh filename="package://mycobot_description/models/mycobot/meshes/arm5_link.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.038 " rpy = " 0 0 0"/>
		</collision>
		<inertial>
		    <origin rpy="0 0 0" xyz="0 0.0049 -0.005" />
		    <mass value="0.06" />
		    <inertia ixx="1.8e-5" ixy="0.0" ixz="0.0" iyy="1.8e-5" iyz="0.0" izz="1.8e-5" />
        	</inertial>
	</link>
	
	<link name="arm5_flange">
		<visual>
			<geometry>
				<mesh filename="package://mycobot_description/models/mycobot/meshes/arm5_flange.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.012 " rpy = " 0 0 0"/>
		</visual>
		<collision>
			<geometry>
				<mesh filename="package://mycobot_description/models/mycobot/meshes/arm5_flange.dae"/>
			</geometry>
			<origin xyz = "0.0 0 -0.012 " rpy = " 0 0 0"/>
		</collision>
		<inertial>
		    <origin rpy="0 0 0" xyz="0 0 -0.004" />
		    <mass value="0.015" />
		    <inertia ixx="1.3e-6" ixy="0.0" ixz="0.0" iyy="1.3e-6" iyz="0.0" izz="2e-6" />
        	</inertial>
	</link>
	
	
	<!-- defining the joints -->
	
	<joint name="body_joint" type="fixed">
		<parent link="ground_plane" />
		<child link="body_link" />
		<origin xyz="0.0 0 0.0" rpy="0 0 0"/>
    	</joint>
 	
 	<joint name="arm1_joint" type="revolute">
		<axis xyz="0 0 1"/>
		<limit effort = "30.0" lower = "-2.88" upper = "2.88" velocity = "0.05"/>
		<parent link="body_link"/>
		<child link="arm1_link"/>
		<origin xyz= "0 0 0.13156" rpy = "0 0 0"/>
	</joint>
	
	<joint name="arm2_joint" type="revolute">
		<axis xyz="0 0 1"/>
		<limit effort = "30.0" lower = "-2.88" upper = "2.88" velocity = "0.05"/>
		<parent link="arm1_link"/>
		<child link="arm2_link"/>
		<origin xyz= "0 0 0" rpy = "0 1.5708 -1.5708"/>
	</joint>
	
	<joint name="arm3_joint" type="revolute">
		<axis xyz=" 0 0 1"/>
		<limit effort = "30.0" lower = "-2.88" upper = "2.88" velocity = "0.05"/>
		<parent link="arm2_link"/>
		<child link="arm3_link"/>
		<origin xyz= "  -0.1104 0 0   " rpy = "0 0 0"/>
	</joint>

	<joint name="arm4_joint" type="revolute">
		<axis xyz=" 0 0 1"/>
		<limit effort = "30.0" lower = "-2.88" upper = "2.88" velocity = "0.05"/>
		<parent link="arm3_link"/>
		<child link="arm4_link"/>
		<origin xyz= "-0.096 0 0.06462" rpy = "0 0 -1.5708"/>
	</joint>
	
	<joint name="arm5_joint" type="revolute">
		<axis xyz="0 0 1"/>
		<limit effort = "30.0" lower = "-2.88" upper = "2.88" velocity = "0.05"/>
		<parent link="arm4_link"/>
		<child link="arm5_link"/>
		<origin xyz= "0 -0.07318 0" rpy = "1.5708 -1.5708 0"/>
	</joint>
	
	<joint name="arm5_flange_joint" type="revolute">
		<axis xyz="0 0 1"/>
		<limit effort = "30.0" lower = "-3.05" upper = "3.05" velocity = "0.05"/>
		<parent link="arm5_link"/>
		<child link="arm5_flange"/>
		<origin xyz= "0 0.0456 0" rpy = "-1.5708 0 0"/>
	</joint>
	
	<!-- defining the transmission for ROS Control -->
  	
	<xacro:macro name="transmission_block" params="joint_name">
		<transmission name="tran_${joint_name}">
			<type>transmission_interface/SimpleTransmission</type>
			<joint name="${joint_name}">
				<hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
			</joint>
			<actuator name="motor_${joint_name}">
				<hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
				<mechanicalReduction>1</mechanicalReduction>
			</actuator>
		</transmission>
	</xacro:macro>
	
	<xacro:transmission_block joint_name="arm1_joint"/>
	<xacro:transmission_block joint_name="arm2_joint"/>
	<xacro:transmission_block joint_name="arm3_joint"/>
	<xacro:transmission_block joint_name="arm4_joint"/>
	<xacro:transmission_block joint_name="arm5_joint"/>
	<xacro:transmission_block joint_name="arm5_flange_joint"/>
  
  	<!-- ros_control plugin -->
  	
  	<gazebo>
		<plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
		    <robotNamespace>/mycobot</robotNamespace>
		</plugin>
    	</gazebo>	
</robot>
